const i=Symbol.for("drizzle:entityKind");function P(r,e){if(!r||typeof r!="object")return!1;if(r instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,i))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let t=Object.getPrototypeOf(r).constructor;if(t)for(;t;){if(i in t&&t[i]===e[i])return!0;t=Object.getPrototypeOf(t)}return!1}class ${constructor(e,t){this.table=e,this.config=t,this.name=t.name,this.keyAsName=t.keyAsName,this.notNull=t.notNull,this.default=t.default,this.defaultFn=t.defaultFn,this.onUpdateFn=t.onUpdateFn,this.hasDefault=t.hasDefault,this.primary=t.primaryKey,this.isUnique=t.isUnique,this.uniqueName=t.uniqueName,this.uniqueType=t.uniqueType,this.dataType=t.dataType,this.columnType=t.columnType,this.generated=t.generated,this.generatedIdentity=t.generatedIdentity}static[i]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}class te{static[i]="ColumnBuilder";config;constructor(e,t,n){this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:t,columnType:n,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}}const B=Symbol.for("drizzle:Name");class re{static[i]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(e,t){this.reference=()=>{const{name:n,columns:o,foreignColumns:a}=e();return{name:n,columns:o,foreignTable:a[0].table,foreignColumns:a}},t&&(this._onUpdate=t.onUpdate,this._onDelete=t.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new ne(e,this)}}class ne{constructor(e,t){this.table=e,this.reference=t.reference,this.onUpdate=t._onUpdate,this.onDelete=t._onDelete}static[i]="PgForeignKey";reference;onUpdate;onDelete;getName(){const{name:e,columns:t,foreignColumns:n}=this.reference(),o=t.map(h=>h.name),a=n.map(h=>h.name),f=[this.table[B],...o,n[0].table[B],...a];return e??`${f.join("_")}_fk`}}function ie(r,...e){return r(...e)}function se(r,e){return`${r[B]}_${e.join("_")}_unique`}function j(r,e,t){for(let n=e;n<r.length;n++){const o=r[n];if(o==="\\"){n++;continue}if(o==='"')return[r.slice(e,n).replace(/\\/g,""),n+1];if(!t&&(o===","||o==="}"))return[r.slice(e,n).replace(/\\/g,""),n]}return[r.slice(e).replace(/\\/g,""),r.length]}function M(r,e=0){const t=[];let n=e,o=!1;for(;n<r.length;){const a=r[n];if(a===","){(o||n===e)&&t.push(""),o=!0,n++;continue}if(o=!1,a==="\\"){n+=2;continue}if(a==='"'){const[g,p]=j(r,n+1,!0);t.push(g),n=p;continue}if(a==="}")return[t,n+1];if(a==="{"){const[g,p]=M(r,n+1);t.push(g),n=p;continue}const[f,h]=j(r,n,!1);t.push(f),n=h}return[t,n]}function oe(r){const[e]=M(r,1);return e}function R(r){return`{${r.map(e=>Array.isArray(e)?R(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}class l extends te{foreignKeyConfigs=[];static[i]="PgColumnBuilder";array(e){return new ue(this.config.name,this,e)}references(e,t={}){return this.foreignKeyConfigs.push({ref:e,actions:t}),this}unique(e,t){return this.config.isUnique=!0,this.config.uniqueName=e,this.config.uniqueType=t?.nulls,this}generatedAlwaysAs(e){return this.config.generated={as:e,type:"always",mode:"stored"},this}buildForeignKeys(e,t){return this.foreignKeyConfigs.map(({ref:n,actions:o})=>ie((a,f)=>{const h=new re(()=>{const g=a();return{columns:[e],foreignColumns:[g]}});return f.onUpdate&&h.onUpdate(f.onUpdate),f.onDelete&&h.onDelete(f.onDelete),h.build(t)},n,o))}buildExtraConfigColumn(e){return new ae(e,this.config)}}class u extends ${constructor(e,t){t.uniqueName||(t.uniqueName=se(e,[t.name])),super(e,t),this.table=e}static[i]="PgColumn"}class ae extends u{static[i]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(e){return this.indexConfig.opClass=e,this}}class V{static[i]="IndexedColumn";constructor(e,t,n,o){this.name=e,this.keyAsName=t,this.type=n,this.indexConfig=o}name;keyAsName;type;indexConfig}class ue extends l{static[i]="PgArrayBuilder";constructor(e,t,n){super(e,"array","PgArray"),this.config.baseBuilder=t,this.config.size=n}build(e){const t=this.config.baseBuilder.build(e);return new O(e,this.config,t)}}class O extends u{constructor(e,t,n,o){super(e,t),this.baseColumn=n,this.range=o,this.size=t.size}size;static[i]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(e){return typeof e=="string"&&(e=oe(e)),e.map(t=>this.baseColumn.mapFromDriverValue(t))}mapToDriverValue(e,t=!1){const n=e.map(o=>o===null?null:P(this.baseColumn,O)?this.baseColumn.mapToDriverValue(o,!0):this.baseColumn.mapToDriverValue(o));return t?n:R(n)}}const U=Symbol.for("drizzle:isPgEnum");function le(r){return!!r&&typeof r=="function"&&U in r&&r[U]===!0}class H{static[i]="Subquery";constructor(e,t,n,o=!1){this._={brand:"Subquery",sql:e,selectedFields:t,alias:n,isWith:o}}}const ce={startActiveSpan(r,e){return e()}},T=Symbol.for("drizzle:ViewBaseConfig"),I=Symbol.for("drizzle:Schema"),E=Symbol.for("drizzle:Columns"),J=Symbol.for("drizzle:ExtraConfigColumns"),F=Symbol.for("drizzle:OriginalName"),z=Symbol.for("drizzle:BaseName"),C=Symbol.for("drizzle:IsAlias"),K=Symbol.for("drizzle:ExtraConfigBuilder"),W=Symbol.for("drizzle:IsDrizzleTable");class b{static[i]="Table";static Symbol={Name:B,Schema:I,OriginalName:F,Columns:E,ExtraConfigColumns:J,BaseName:z,IsAlias:C,ExtraConfigBuilder:K};[B];[F];[I];[E];[J];[z];[C]=!1;[W]=!0;[K]=void 0;constructor(e,t,n){this[B]=this[F]=e,this[I]=t,this[z]=n}}function Sr(r){return typeof r=="object"&&r!==null&&W in r}function ge(r){return r!=null&&typeof r.getSQL=="function"}function me(r){const e={sql:"",params:[]};for(const t of r)e.sql+=t.sql,e.params.push(...t.params),t.typings?.length&&(e.typings||(e.typings=[]),e.typings.push(...t.typings));return e}class w{static[i]="StringChunk";value;constructor(e){this.value=Array.isArray(e)?e:[e]}getSQL(){return new m([this])}}class m{constructor(e){this.queryChunks=e}static[i]="SQL";decoder=X;shouldInlineParams=!1;append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return ce.startActiveSpan("drizzle.buildSQL",t=>{const n=this.buildQueryFromSourceParams(this.queryChunks,e);return t?.setAttributes({"drizzle.query.text":n.sql,"drizzle.query.params":JSON.stringify(n.params)}),n})}buildQueryFromSourceParams(e,t){const n=Object.assign({},t,{inlineParams:t.inlineParams||this.shouldInlineParams,paramStartIndex:t.paramStartIndex||{value:0}}),{casing:o,escapeName:a,escapeParam:f,prepareTyping:h,inlineParams:g,paramStartIndex:p}=n;return me(e.map(s=>{if(P(s,w))return{sql:s.value.join(""),params:[]};if(P(s,Q))return{sql:a(s.value),params:[]};if(s===void 0)return{sql:"",params:[]};if(Array.isArray(s)){const c=[new w("(")];for(const[d,S]of s.entries())c.push(S),d<s.length-1&&c.push(new w(", "));return c.push(new w(")")),this.buildQueryFromSourceParams(c,n)}if(P(s,m))return this.buildQueryFromSourceParams(s.queryChunks,{...n,inlineParams:g||s.shouldInlineParams});if(P(s,b)){const c=s[b.Symbol.Schema],d=s[b.Symbol.Name];return{sql:c===void 0||s[C]?a(d):a(c)+"."+a(d),params:[]}}if(P(s,$)){const c=o.getColumnCasing(s);if(t.invokeSource==="indexes")return{sql:a(c),params:[]};const d=s.table[b.Symbol.Schema];return{sql:s.table[C]||d===void 0?a(s.table[b.Symbol.Name])+"."+a(c):a(d)+"."+a(s.table[b.Symbol.Name])+"."+a(c),params:[]}}if(P(s,de)){const c=s[T].schema,d=s[T].name;return{sql:c===void 0||s[T].isAlias?a(d):a(c)+"."+a(d),params:[]}}if(P(s,Z)){if(P(s.value,q))return{sql:f(p.value++,s),params:[s],typings:["none"]};const c=s.value===null?null:s.encoder.mapToDriverValue(s.value);if(P(c,m))return this.buildQueryFromSourceParams([c],n);if(g)return{sql:this.mapInlineParam(c,n),params:[]};let d=["none"];return h&&(d=[h(s.encoder)]),{sql:f(p.value++,c),params:[c],typings:d}}return P(s,q)?{sql:f(p.value++,s),params:[s],typings:["none"]}:P(s,m.Aliased)&&s.fieldAlias!==void 0?{sql:a(s.fieldAlias),params:[]}:P(s,H)?s._.isWith?{sql:a(s._.alias),params:[]}:this.buildQueryFromSourceParams([new w("("),s._.sql,new w(") "),new Q(s._.alias)],n):le(s)?s.schema?{sql:a(s.schema)+"."+a(s.enumName),params:[]}:{sql:a(s.enumName),params:[]}:ge(s)?s.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([s.getSQL()],n):this.buildQueryFromSourceParams([new w("("),s.getSQL(),new w(")")],n):g?{sql:this.mapInlineParam(s,n),params:[]}:{sql:f(p.value++,s),params:[s],typings:["none"]}}))}mapInlineParam(e,{escapeString:t}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return t(e);if(typeof e=="object"){const n=e.toString();return t(n==="[object Object]"?JSON.stringify(e):n)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new m.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}}class Q{constructor(e){this.value=e}static[i]="Name";brand;getSQL(){return new m([this])}}const X={mapFromDriverValue:r=>r},Y={mapToDriverValue:r=>r};({...X,...Y});class Z{constructor(e,t=Y){this.value=e,this.encoder=t}static[i]="Param";brand;getSQL(){return new m([this])}}function D(r,...e){const t=[];(e.length>0||r.length>0&&r[0]!=="")&&t.push(new w(r[0]));for(const[n,o]of e.entries())t.push(o,new w(r[n+1]));return new m(t)}(r=>{function e(){return new m([])}r.empty=e;function t(g){return new m(g)}r.fromList=t;function n(g){return new m([new w(g)])}r.raw=n;function o(g,p){const s=[];for(const[c,d]of g.entries())c>0&&p!==void 0&&s.push(p),s.push(d);return new m(s)}r.join=o;function a(g){return new Q(g)}r.identifier=a;function f(g){return new q(g)}r.placeholder=f;function h(g,p){return new Z(g,p)}r.param=h})(D||(D={}));(r=>{class e{constructor(n,o){this.sql=n,this.fieldAlias=o}static[i]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new e(this.sql,this.fieldAlias)}}r.Aliased=e})(m||(m={}));class q{constructor(e){this.name=e}static[i]="Placeholder";getSQL(){return new m([this])}}const k=Symbol.for("drizzle:IsDrizzleView");class de{static[i]="View";[T];[k]=!0;constructor({name:e,schema:t,selectedFields:n,query:o}){this[T]={name:e,originalName:e,schema:t,selectedFields:n,query:o,isExisting:!o,isAlias:!1}}getSQL(){return new m([this])}}function Br(r){return typeof r=="object"&&r!==null&&k in r}$.prototype.getSQL=function(){return new m([this])};b.prototype.getSQL=function(){return new m([this])};H.prototype.getSQL=function(){return new m([this])};function Tr(r){return r[b.Symbol.Columns]}function xr(r){return r[T].selectedFields}function y(r,e){return{name:typeof r=="string"&&r.length>0?r:"",config:typeof r=="object"?r:e}}class N extends l{static[i]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity(e){if(e){const{name:t,...n}=e;this.config.generatedIdentity={type:"always",sequenceName:t,sequenceOptions:n}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){const{name:t,...n}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:t,sequenceOptions:n}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}class fe extends N{static[i]="PgBigInt53Builder";constructor(e){super(e,"number","PgBigInt53")}build(e){return new pe(e,this.config)}}class pe extends u{static[i]="PgBigInt53";getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}class he extends N{static[i]="PgBigInt64Builder";constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new ye(e,this.config)}}class ye extends u{static[i]="PgBigInt64";getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}function Pe(r,e){const{name:t,config:n}=y(r,e);return n.mode==="number"?new fe(t):new he(t)}class be extends l{static[i]="PgBigSerial53Builder";constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new we(e,this.config)}}class we extends u{static[i]="PgBigSerial53";getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}class Se extends l{static[i]="PgBigSerial64Builder";constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new Be(e,this.config)}}class Be extends u{static[i]="PgBigSerial64";getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}function Te(r,e){const{name:t,config:n}=y(r,e);return n.mode==="number"?new be(t):new Se(t)}class xe extends l{static[i]="PgBooleanBuilder";constructor(e){super(e,"boolean","PgBoolean")}build(e){return new Ce(e,this.config)}}class Ce extends u{static[i]="PgBoolean";getSQLType(){return"boolean"}}function De(r){return new xe(r??"")}class Ne extends l{static[i]="PgCharBuilder";constructor(e,t){super(e,"string","PgChar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new Ve(e,this.config)}}class Ve extends u{static[i]="PgChar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}function Ie(r,e={}){const{name:t,config:n}=y(r,e);return new Ne(t,n)}class Fe extends l{static[i]="PgCidrBuilder";constructor(e){super(e,"string","PgCidr")}build(e){return new ze(e,this.config)}}class ze extends u{static[i]="PgCidr";getSQLType(){return"cidr"}}function ve(r){return new Fe(r??"")}class Le extends l{static[i]="PgCustomColumnBuilder";constructor(e,t,n){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=t,this.config.customTypeParams=n}build(e){return new Qe(e,this.config)}}class Qe extends u{static[i]="PgCustomColumn";sqlName;mapTo;mapFrom;constructor(e,t){super(e,t),this.sqlName=t.customTypeParams.dataType(t.fieldConfig),this.mapTo=t.customTypeParams.toDriver,this.mapFrom=t.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(e){return typeof this.mapFrom=="function"?this.mapFrom(e):e}mapToDriverValue(e){return typeof this.mapTo=="function"?this.mapTo(e):e}}function qe(r){return(e,t)=>{const{name:n,config:o}=y(e,t);return new Le(n,o,r)}}class x extends l{static[i]="PgDateColumnBaseBuilder";defaultNow(){return this.default(D`now()`)}}class Ae extends x{static[i]="PgDateBuilder";constructor(e){super(e,"date","PgDate")}build(e){return new $e(e,this.config)}}class $e extends u{static[i]="PgDate";getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}class Oe extends x{static[i]="PgDateStringBuilder";constructor(e){super(e,"string","PgDateString")}build(e){return new je(e,this.config)}}class je extends u{static[i]="PgDateString";getSQLType(){return"date"}}function Ue(r,e){const{name:t,config:n}=y(r,e);return n?.mode==="date"?new Ae(t):new Oe(t)}class Ee extends l{static[i]="PgDoublePrecisionBuilder";constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new Je(e,this.config)}}class Je extends u{static[i]="PgDoublePrecision";getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}}function Ke(r){return new Ee(r??"")}class _e extends l{static[i]="PgInetBuilder";constructor(e){super(e,"string","PgInet")}build(e){return new Ge(e,this.config)}}class Ge extends u{static[i]="PgInet";getSQLType(){return"inet"}}function Me(r){return new _e(r??"")}class Re extends N{static[i]="PgIntegerBuilder";constructor(e){super(e,"number","PgInteger")}build(e){return new He(e,this.config)}}class He extends u{static[i]="PgInteger";getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}}function We(r){return new Re(r??"")}class Xe extends l{static[i]="PgIntervalBuilder";constructor(e,t){super(e,"string","PgInterval"),this.config.intervalConfig=t}build(e){return new Ye(e,this.config)}}class Ye extends u{static[i]="PgInterval";fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){const e=this.fields?` ${this.fields}`:"",t=this.precision?`(${this.precision})`:"";return`interval${e}${t}`}}function Ze(r,e={}){const{name:t,config:n}=y(r,e);return new Xe(t,n)}class ke extends l{static[i]="PgJsonBuilder";constructor(e){super(e,"json","PgJson")}build(e){return new et(e,this.config)}}class et extends u{static[i]="PgJson";constructor(e,t){super(e,t)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}function tt(r){return new ke(r??"")}class rt extends l{static[i]="PgJsonbBuilder";constructor(e){super(e,"json","PgJsonb")}build(e){return new nt(e,this.config)}}class nt extends u{static[i]="PgJsonb";constructor(e,t){super(e,t)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}function it(r){return new rt(r??"")}class st extends l{static[i]="PgLineBuilder";constructor(e){super(e,"array","PgLine")}build(e){return new ot(e,this.config)}}class ot extends u{static[i]="PgLine";getSQLType(){return"line"}mapFromDriverValue(e){const[t,n,o]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(n),Number.parseFloat(o)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}class at extends l{static[i]="PgLineABCBuilder";constructor(e){super(e,"json","PgLineABC")}build(e){return new ut(e,this.config)}}class ut extends u{static[i]="PgLineABC";getSQLType(){return"line"}mapFromDriverValue(e){const[t,n,o]=e.slice(1,-1).split(",");return{a:Number.parseFloat(t),b:Number.parseFloat(n),c:Number.parseFloat(o)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}function lt(r,e){const{name:t,config:n}=y(r,e);return!n?.mode||n.mode==="tuple"?new st(t):new at(t)}class ct extends l{static[i]="PgMacaddrBuilder";constructor(e){super(e,"string","PgMacaddr")}build(e){return new gt(e,this.config)}}class gt extends u{static[i]="PgMacaddr";getSQLType(){return"macaddr"}}function mt(r){return new ct(r??"")}class dt extends l{static[i]="PgMacaddr8Builder";constructor(e){super(e,"string","PgMacaddr8")}build(e){return new ft(e,this.config)}}class ft extends u{static[i]="PgMacaddr8";getSQLType(){return"macaddr8"}}function pt(r){return new dt(r??"")}class ht extends l{static[i]="PgNumericBuilder";constructor(e,t,n){super(e,"string","PgNumeric"),this.config.precision=t,this.config.scale=n}build(e){return new yt(e,this.config)}}class yt extends u{static[i]="PgNumeric";precision;scale;constructor(e,t){super(e,t),this.precision=t.precision,this.scale=t.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}function Pt(r,e){const{name:t,config:n}=y(r,e);return new ht(t,n?.precision,n?.scale)}class bt extends l{static[i]="PgPointTupleBuilder";constructor(e){super(e,"array","PgPointTuple")}build(e){return new wt(e,this.config)}}class wt extends u{static[i]="PgPointTuple";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[t,n]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(n)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}class St extends l{static[i]="PgPointObjectBuilder";constructor(e){super(e,"json","PgPointObject")}build(e){return new Bt(e,this.config)}}class Bt extends u{static[i]="PgPointObject";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[t,n]=e.slice(1,-1).split(",");return{x:Number.parseFloat(t),y:Number.parseFloat(n)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}function Tt(r,e){const{name:t,config:n}=y(r,e);return!n?.mode||n.mode==="tuple"?new bt(t):new St(t)}function xt(r){const e=[];for(let t=0;t<r.length;t+=2)e.push(Number.parseInt(r.slice(t,t+2),16));return new Uint8Array(e)}function _(r,e){const t=new ArrayBuffer(8),n=new DataView(t);for(let o=0;o<8;o++)n.setUint8(o,r[e+o]);return n.getFloat64(0,!0)}function ee(r){const e=xt(r);let t=0;const n=e[t];t+=1;const o=new DataView(e.buffer),a=o.getUint32(t,n===1);if(t+=4,a&536870912&&(o.getUint32(t,n===1),t+=4),(a&65535)===1){const f=_(e,t);t+=8;const h=_(e,t);return t+=8,[f,h]}throw new Error("Unsupported geometry type")}class Ct extends l{static[i]="PgGeometryBuilder";constructor(e){super(e,"array","PgGeometry")}build(e){return new Dt(e,this.config)}}class Dt extends u{static[i]="PgGeometry";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return ee(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}class Nt extends l{static[i]="PgGeometryObjectBuilder";constructor(e){super(e,"json","PgGeometryObject")}build(e){return new Vt(e,this.config)}}class Vt extends u{static[i]="PgGeometryObject";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){const t=ee(e);return{x:t[0],y:t[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}function It(r,e){const{name:t,config:n}=y(r,e);return!n?.mode||n.mode==="tuple"?new Ct(t):new Nt(t)}class Ft extends l{static[i]="PgRealBuilder";constructor(e,t){super(e,"number","PgReal"),this.config.length=t}build(e){return new zt(e,this.config)}}class zt extends u{static[i]="PgReal";constructor(e,t){super(e,t)}getSQLType(){return"real"}mapFromDriverValue=e=>typeof e=="string"?Number.parseFloat(e):e}function vt(r){return new Ft(r??"")}class Lt extends l{static[i]="PgSerialBuilder";constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Qt(e,this.config)}}class Qt extends u{static[i]="PgSerial";getSQLType(){return"serial"}}function qt(r){return new Lt(r??"")}class At extends N{static[i]="PgSmallIntBuilder";constructor(e){super(e,"number","PgSmallInt")}build(e){return new $t(e,this.config)}}class $t extends u{static[i]="PgSmallInt";getSQLType(){return"smallint"}mapFromDriverValue=e=>typeof e=="string"?Number(e):e}function Ot(r){return new At(r??"")}class jt extends l{static[i]="PgSmallSerialBuilder";constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Ut(e,this.config)}}class Ut extends u{static[i]="PgSmallSerial";getSQLType(){return"smallserial"}}function Et(r){return new jt(r??"")}class Jt extends l{static[i]="PgTextBuilder";constructor(e,t){super(e,"string","PgText"),this.config.enumValues=t.enum}build(e){return new Kt(e,this.config)}}class Kt extends u{static[i]="PgText";enumValues=this.config.enumValues;getSQLType(){return"text"}}function _t(r,e={}){const{name:t,config:n}=y(r,e);return new Jt(t,n)}class Gt extends x{constructor(e,t,n){super(e,"string","PgTime"),this.withTimezone=t,this.precision=n,this.config.withTimezone=t,this.config.precision=n}static[i]="PgTimeBuilder";build(e){return new Mt(e,this.config)}}class Mt extends u{static[i]="PgTime";withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}function Rt(r,e={}){const{name:t,config:n}=y(r,e);return new Gt(t,n.withTimezone??!1,n.precision)}class Ht extends x{static[i]="PgTimestampBuilder";constructor(e,t,n){super(e,"date","PgTimestamp"),this.config.withTimezone=t,this.config.precision=n}build(e){return new Wt(e,this.config)}}class Wt extends u{static[i]="PgTimestamp";withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}mapFromDriverValue=e=>new Date(this.withTimezone?e:e+"+0000");mapToDriverValue=e=>e.toISOString()}class Xt extends x{static[i]="PgTimestampStringBuilder";constructor(e,t,n){super(e,"string","PgTimestampString"),this.config.withTimezone=t,this.config.precision=n}build(e){return new Yt(e,this.config)}}class Yt extends u{static[i]="PgTimestampString";withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}function Zt(r,e={}){const{name:t,config:n}=y(r,e);return n?.mode==="string"?new Xt(t,n.withTimezone??!1,n.precision):new Ht(t,n?.withTimezone??!1,n?.precision)}class kt extends l{static[i]="PgUUIDBuilder";constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(D`gen_random_uuid()`)}build(e){return new er(e,this.config)}}class er extends u{static[i]="PgUUID";getSQLType(){return"uuid"}}function tr(r){return new kt(r??"")}class rr extends l{static[i]="PgVarcharBuilder";constructor(e,t){super(e,"string","PgVarchar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new nr(e,this.config)}}class nr extends u{static[i]="PgVarchar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}function ir(r,e={}){const{name:t,config:n}=y(r,e);return new rr(t,n)}class sr extends l{static[i]="PgBinaryVectorBuilder";constructor(e,t){super(e,"string","PgBinaryVector"),this.config.dimensions=t.dimensions}build(e){return new or(e,this.config)}}class or extends u{static[i]="PgBinaryVector";dimensions=this.config.dimensions;getSQLType(){return`bit(${this.dimensions})`}}function ar(r,e){const{name:t,config:n}=y(r,e);return new sr(t,n)}class ur extends l{static[i]="PgHalfVectorBuilder";constructor(e,t){super(e,"array","PgHalfVector"),this.config.dimensions=t.dimensions}build(e){return new lr(e,this.config)}}class lr extends u{static[i]="PgHalfVector";dimensions=this.config.dimensions;getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(t=>Number.parseFloat(t))}}function cr(r,e){const{name:t,config:n}=y(r,e);return new ur(t,n)}class gr extends l{static[i]="PgSparseVectorBuilder";constructor(e,t){super(e,"string","PgSparseVector"),this.config.dimensions=t.dimensions}build(e){return new mr(e,this.config)}}class mr extends u{static[i]="PgSparseVector";dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}}function dr(r,e){const{name:t,config:n}=y(r,e);return new gr(t,n)}class fr extends l{static[i]="PgVectorBuilder";constructor(e,t){super(e,"array","PgVector"),this.config.dimensions=t.dimensions}build(e){return new pr(e,this.config)}}class pr extends u{static[i]="PgVector";dimensions=this.config.dimensions;getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(t=>Number.parseFloat(t))}}function hr(r,e){const{name:t,config:n}=y(r,e);return new fr(t,n)}function yr(){return{bigint:Pe,bigserial:Te,boolean:De,char:Ie,cidr:ve,customType:qe,date:Ue,doublePrecision:Ke,inet:Me,integer:We,interval:Ze,json:tt,jsonb:it,line:lt,macaddr:mt,macaddr8:pt,numeric:Pt,point:Tt,geometry:It,real:vt,serial:qt,smallint:Ot,smallserial:Et,text:_t,time:Rt,timestamp:Zt,uuid:tr,varchar:ir,bit:ar,halfvec:cr,sparsevec:dr,vector:hr}}const A=Symbol.for("drizzle:PgInlineForeignKeys"),G=Symbol.for("drizzle:EnableRLS");class v extends b{static[i]="PgTable";static Symbol=Object.assign({},b.Symbol,{InlineForeignKeys:A,EnableRLS:G});[A]=[];[G]=!1;[b.Symbol.ExtraConfigBuilder]=void 0}function Pr(r,e,t,n,o=r){const a=new v(r,n,o),f=typeof e=="function"?e(yr()):e,h=Object.fromEntries(Object.entries(f).map(([s,c])=>{const d=c;d.setName(s);const S=d.build(a);return a[A].push(...d.buildForeignKeys(S,a)),[s,S]})),g=Object.fromEntries(Object.entries(f).map(([s,c])=>{const d=c;d.setName(s);const S=d.buildExtraConfigColumn(a);return[s,S]})),p=Object.assign(a,h);return p[b.Symbol.Columns]=h,p[b.Symbol.ExtraConfigColumns]=g,t&&(p[v.Symbol.ExtraConfigBuilder]=t),Object.assign(p,{enableRLS:()=>(p[v.Symbol.EnableRLS]=!0,p)})}const Cr=(r,e,t)=>Pr(r,e,t,void 0);class br{constructor(e,t){this.unique=e,this.name=t}static[i]="PgIndexBuilderOn";on(...e){return new L(e.map(t=>{if(P(t,m))return t;t=t;const n=new V(t.name,!!t.keyAsName,t.columnType,t.indexConfig);return t.indexConfig=JSON.parse(JSON.stringify(t.defaultConfig)),n}),this.unique,!1,this.name)}onOnly(...e){return new L(e.map(t=>{if(P(t,m))return t;t=t;const n=new V(t.name,!!t.keyAsName,t.columnType,t.indexConfig);return t.indexConfig=t.defaultConfig,n}),this.unique,!0,this.name)}using(e,...t){return new L(t.map(n=>{if(P(n,m))return n;n=n;const o=new V(n.name,!!n.keyAsName,n.columnType,n.indexConfig);return n.indexConfig=JSON.parse(JSON.stringify(n.defaultConfig)),o}),this.unique,!0,this.name,e)}}class L{static[i]="PgIndexBuilder";config;constructor(e,t,n,o,a="btree"){this.config={name:o,columns:e,unique:t,only:n,method:a}}concurrently(){return this.config.concurrently=!0,this}with(e){return this.config.with=e,this}where(e){return this.config.where=e,this}build(e){return new wr(this.config,e)}}class wr{static[i]="PgIndex";config;constructor(e,t){this.config={...e,table:t}}}function Dr(r){return new br(!1,r)}export{$ as C,m as S,xr as a,P as b,Br as c,De as d,We as e,Ke as f,Tr as g,_t as h,Sr as i,it as j,Dr as k,Cr as p,Zt as t,tr as u,ir as v};
